<div class="max-w-xl mx-auto bg-white p-8 md:p-10 rounded-xl shadow-2xl border-t-4 border-indigo-600 animate-fadeIn" @fadeIn>
  <h2 class="text-3xl font-bold text-center mb-8 text-gray-800">{{ isEditing ? 'Editar Producto Existente' : 'Crear Nuevo Producto' }}</h2>
  <form (ngSubmit)="submit()" [formGroup]="form" class="space-y-6" novalidate>
    <div>
      <label for="name" class="block text-gray-700 font-semibold mb-2">Nombre (*)</label>
      <input id="name" formControlName="name" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition duration-200"
             [ngClass]="{'border-red-500 focus:ring-red-300': f.name.invalid && (f.name.touched || f.name.dirty), 'border-gray-300 focus:ring-indigo-300': f.name.valid || !f.name.touched }" placeholder="Ej: Monitor Ultra HD" />
      <p *ngIf="f.name.invalid && (f.name.touched || f.name.dirty)" class="text-red-500 text-sm mt-1 animate-fadeIn">El nombre es obligatorio.</p>
    </div>

    <div>
      <label for="category" class="block text-gray-700 font-semibold mb-2">Categoría (*)</label>
      <input id="category" formControlName="category" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition duration-200"
             [ngClass]="{'border-red-500 focus:ring-red-300': f.category.invalid && (f.category.touched || f.category.dirty), 'border-gray-300 focus:ring-indigo-300': f.category.valid || !f.category.touched }" placeholder="Ej: Portátiles" />
      <p *ngIf="f.category.invalid && (f.category.touched || f.category.dirty)" class="text-red-500 text-sm mt-1 animate-fadeIn">La categoría es obligatoria.</p>
    </div>

    <div>
      <label for="price" class="block text-gray-700 font-semibold mb-2">Valor (*)</label>
      <input id="price" formControlName="price" type="number" step="0.01" min="0.01" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition duration-200" />
      <p *ngIf="f.price.invalid && (f.price.touched || f.price.dirty)" class="text-red-500 text-sm mt-1 animate-fadeIn">El valor debe ser un número positivo.</p>
    </div>

    <div>
      <label for="stock" class="block text-gray-700 font-semibold mb-2">Stock (*)</label>
      <input id="stock" formControlName="stock" type="number" min="0" step="1" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition duration-200" />
      <p *ngIf="f.stock.invalid && (f.stock.touched || f.stock.dirty)" class="text-red-500 text-sm mt-1 animate-fadeIn">El stock debe ser un entero no negativo.</p>
    </div>

    <button type="submit" [disabled]="isSubmitting" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.01] active:scale-[0.99] disabled:bg-indigo-400">
      <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin mr-2"></i>
      {{ isEditing ? 'Guardar Cambios' : 'Crear Producto' }}
    </button>

    <button type="button" (click)="cancel()" class="w-full text-indigo-600 border border-indigo-600 hover:bg-indigo-50 font-bold py-3 rounded-lg transition duration-300">
      Cancelar
    </button>
  </form>
</div>
